
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File IO &#8212; EOSC211 - Computer Methods for Earth, Ocean, and Atmospheric Scientists</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plotting color images with matplotlib" href="../wk13/e211_colormaps.html" />
    <link rel="prev" title="Assignment 2 - Flybys" href="../assignment02/ast2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">EOSC211 - Computer Methods for Earth, Ocean, and Atmospheric Scientists</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../announcements.html">
                    Course Home/Announcements
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 1 - Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus/syllabus.html">
   Course Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus/covid_statements.html">
   Covid Safety in the Classroom
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus/schedule_F2021.html">
   Course Schedule - Fall Semester 2021
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../syllabus/worksheet_steps_in_problem_solving.html">
   Steps In Problem Solving
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 2 - Data Types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk02/data_types.html">
   Data Types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk02/some_review_plus_built_in_functions_arrays_preview.html">
   Some Review Plus Built-In Functions, Arrays Preview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk02/week2_lab/lab_wk2.html">
   Lab Week 2 - Jupyterhub Tutorial
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk02/week2_quiz.html">
   Week 2 quiz
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 3 - Data Structures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk03/data_structures.html">
   Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk03/data_structures_ii.html">
   Data Structures II
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk03/week3_quiz.html">
   Week 3 quiz
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk03/week3_lab/lab_wk3.html">
   Lab Week 3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 4 - Scientific Figures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk04/making_plots.html">
   Making Plots Worksheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk04/week4_lab/lab_wk4.html">
   Lab Week 4
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 5 - Computer Logic
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk05/logic.html">
   Logic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk05/complicated_logic.html">
   More Complicated Logic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk05/wk05_indexing.html">
   Indexing worksheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk05/week5_quiz.html">
   Week 5 quiz
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk05/week5_lab/lab_wk5.html">
   Lab Week 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 6 - Loops
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk06/loops.html">
   Loops
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk06/loops_ii.html">
   Loops II
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk06/week6_quiz.html">
   Q1)  What does the following cell print?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk06/week6_lab/lab_wk6.html">
   Lab Week 6
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 7 - Midterm
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk07/midterm_review.html">
   Midterm Review
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk07/week7_quiz.html">
   Week 7 quiz
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 8 - Functions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk08/functions.html">
   Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk08/functions_ii.html">
   Functions II
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk08/quiz_wk08.html">
   Week 08 Quiz: Functions basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk08/week8_lab/lab_wk8.html">
   Lab Week 8
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 9 - Functions/debugging
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk09/debugging.html">
   More Functions &amp; Debugging Practice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk09/quiz_wk9.html">
   Quiz Week 9:  Debugging with Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk09/debugging_ii.html">
   Debugging II
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk09/week9_lab/lab_wk9.html">
   Lab Week 9
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 10 - Interpolation/scipy
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk10/wk10_interpolation_demo.html">
   Week 10:  Interpolation - some examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk10/dictionaries_and_f_strings.html">
   Dictionaries, F String Literals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk10/quiz_wk10.html">
   Week 10 Quiz
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 11 - Pandas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk11/pythia_pandas.html">
   Introduction to Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk11/week11_lab/lab_wk11.html">
   Lab Week 11
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk11/wk11_quiz.html">
   Week 11 quiz
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 12 - Review/File IO
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="wk12_worksheet1.html">
   Week 12 Review Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="wk12_quiz.html">
   Name / Student #:
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Week 13 - Review
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../wk13/wk13_worksheet1.html">
   Review Exercises EOSC 211
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk13/wk13_quiz.html">
   Week 13 Quiz 1 Solution:  Review with basic functions, loops, code tracing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk13/wk13_quiz2.html">
   Week 13 Quiz 2:  Review with numpy arrays, basic logical indexing
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../assignment1/assignment1.html">
   Assignment 1 – CO2/temperature
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignment02/ast2.html">
   Assignment 2 - Flybys
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Extra topics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   File IO
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk13/e211_colormaps.html">
   Plotting color images with matplotlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk13/next_steps.html">
   Next steps
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference material
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../reference_notes/thursday_oct7.html">
   Notes for Thursday Oct. 7
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../wk11/week11_lab/pandas-cheatsheet.html">
   Pandas Cheatsheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://phaustin.github.io/eosc211_students/wk11/pythia_pandas.html">
   Pythia Pandas Lesson
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/phaustin/eosc211_students/e211_live_main?urlpath=lab/tree/wk12/file_io_practice.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://open.jupyter.ubc.ca/jupyter/hub/user-redirect/git-pull?repo=https://github.com/phaustin/eosc211_students&urlpath=lab/tree/eosc211_students/wk12/file_io_practice.ipynb&branch=e211_live_main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/wk12/file_io_practice.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../_sources/wk12/file_io_practice.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#eosc-211">
   EOSC 211
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background-text-vs-binary">
   Background – text vs. binary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-basic-text-file-example">
   A basic text file example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#an-easier-way">
   An easier way
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-metadata">
   Including metadata
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#question-1">
   Question 1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#question-2">
   Question 2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#postscript-writing-binary-files">
   Postscript: writing binary files
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>File IO</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#eosc-211">
   EOSC 211
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background-text-vs-binary">
   Background – text vs. binary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-basic-text-file-example">
   A basic text file example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#an-easier-way">
   An easier way
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-metadata">
   Including metadata
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#question-1">
   Question 1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#question-2">
   Question 2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#postscript-writing-binary-files">
   Postscript: writing binary files
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="file-io">
<h1>File IO<a class="headerlink" href="#file-io" title="Permalink to this headline">#</a></h1>
<div class="section" id="eosc-211">
<h2>EOSC 211<a class="headerlink" href="#eosc-211" title="Permalink to this headline">#</a></h2>
<p><strong>Week 12 Day 2</strong></p>
<p><strong>Learning Objectives:</strong></p>
<ol class="simple">
<li><p>Convert python datatypes (arrays, datetime slices) into basic
strings, lists, tuples, dicts that can be saved to a text file in json format</p></li>
<li><p>Write a function to open a json file and convert the file contents back
into python objects.</p></li>
</ol>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h2>
<p>In this course we’ve usually started a worksheet or lab by reading a data file into python.  For example,
in <a class="reference external" href="https://phaustin.github.io/eosc211_students/wk05/wk05_indexing.html">wk05_indexing</a> we used
<code class="docutils literal notranslate"><span class="pre">np.load</span></code> to read in a dictionary containing two numpy binary files containing the arrays <code class="docutils literal notranslate"><span class="pre">flux</span></code> and <code class="docutils literal notranslate"><span class="pre">temp</span></code>.
As I mentioned in that notebook, these files were written by  <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.savez.html">np.savez</a>.  In <a class="reference external" href="https://phaustin.github.io/eosc211_students/wk11/pythia_pandas.html">week 11</a> you used <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> to read in
a text file written in spreadsheet <code class="docutils literal notranslate"><span class="pre">comma</span> <span class="pre">separated</span> <span class="pre">value</span></code> format.  This <a class="reference external" href="https://github.com/phaustin/eosc211_students/blob/e211_live_main/wk11/enso_data.csv">enso_data.csv</a> file was written
from a dataframe using <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html">pandas.DataFrame.to_csv</a>.</p>
<p>Writing binary numpy files and csv files from dataframes works: but there is a significant drawback,
you need numpy and some kind of spreadsheet to read the data.  How would you write a file
that any text editor or programming language could work with?</p>
</div>
<div class="section" id="background-text-vs-binary">
<h2>Background – text vs. binary<a class="headerlink" href="#background-text-vs-binary" title="Permalink to this headline">#</a></h2>
<p>What is the difference between a text file like <code class="docutils literal notranslate"><span class="pre">enso_data.csv</span></code> and a binary file like <code class="docutils literal notranslate"><span class="pre">temp_flux.npz</span></code>?  At the
machine level, there is no difference, like everything else on your computer, they consist only of a
long string of 1’s and 0’s.  The difference is in how a computer program interprets those 1’s and 0’s.</p>
<p>In a text file, the 8 bit bytes are mapped to characters in a human language using a lookup table.
Python (and all modern programming languages) uses the <a class="reference external" href="https://unicode-table.com/en/blocks/">unicode character table</a>, which includes not only languages, but <a class="reference external" href="https://unicode-table.com/en/blocks/mathematical-operators/">math</a>, <a class="reference external" href="https://unicode-table.com/en/blocks/miscellaneous-symbols/">emojis, musical notes and chess pieces</a></p>
<p>In a binary file, the bits are read into memory with no assumption about a mapping. You need to know
whether the bits were written as 64 bit floats, 32 bit ints, or 1 bit logical values.  This quickly gets
complicated – there is a brief note about packages that write common binary data formats at the
end of the worksheet.</p>
</div>
<div class="section" id="a-basic-text-file-example">
<h2>A basic text file example<a class="headerlink" href="#a-basic-text-file-example" title="Permalink to this headline">#</a></h2>
<p>Here’s basic  write of a numpy array to a text file using the folders we created in the week 11 lab.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">myhome</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>

<span class="c1"># create the folder</span>
<span class="n">text_dir</span> <span class="o">=</span> <span class="n">myhome</span> <span class="o">/</span> <span class="s1">&#39;eosc211/week12&#39;</span>
<span class="n">text_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># make some data and write it out</span>
<span class="n">simple_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">text_dir</span> <span class="o">/</span> <span class="s1">&#39;simplefile.txt&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">the_num</span> <span class="ow">in</span> <span class="n">simple_vec</span><span class="p">:</span>
        <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">the_num</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The last block of code above uses <code class="docutils literal notranslate"><span class="pre">open</span></code> to open a file for writing (which will
overwrite anything that was already there) and then converts each floating point number into
a string and writes that to the file, including a newline <code class="docutils literal notranslate"><span class="pre">\n</span></code>.  The <code class="docutils literal notranslate"><span class="pre">with</span></code> statement
handles closing the file safely once you’ve left the <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">context</span> <span class="pre">block</span></code></p>
<p>Check that this works by launching a text editor to look at the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">eosc211</span><span class="o">/</span><span class="n">week12</span>
<span class="n">start</span> <span class="n">simplefile</span><span class="o">.</span><span class="n">txt</span>  <span class="p">(</span><span class="k">for</span> <span class="n">windows</span><span class="p">)</span>
<span class="nb">open</span> <span class="n">simplefile</span><span class="o">.</span><span class="n">txt</span>  <span class="p">(</span><span class="k">for</span> <span class="n">macs</span><span class="p">)</span>
</pre></div>
</div>
<p>or using the text file editor on our jupyterhub.</p>
</div>
<div class="section" id="an-easier-way">
<h2>An easier way<a class="headerlink" href="#an-easier-way" title="Permalink to this headline">#</a></h2>
<p>That’s quite a bit of work to write out a couple of numbers.  Python provides a variety of modules
that allow you to skip all this bookkeeping, as long as your data consists of basic python types:
<code class="docutils literal notranslate"><span class="pre">strings,</span> <span class="pre">lists,</span> <span class="pre">tuples,</span> <span class="pre">or</span> <span class="pre">dictionaries</span></code> and you want to save using a common format (like csv).
One very common general text file format is <code class="docutils literal notranslate"><span class="pre">json</span></code> (javascript object notation).  Here is the same
file written in json.  We’ll try a 3-d array this time.  We need to first turn the array into
a list, then dump the list to the file using <a class="reference external" href="https://docs.python.org/3/library/json.html">json.dump</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="c1">#</span>
<span class="c1"># make a 3-d array</span>
<span class="c1">#</span>
<span class="n">simple_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">simple_vec</span> <span class="o">=</span> <span class="n">simple_vec</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1"># write out as a json list</span>
<span class="c1">#</span>
<span class="n">json_file</span> <span class="o">=</span> <span class="n">text_dir</span> <span class="o">/</span> <span class="s1">&#39;simplefile.json&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_out</span><span class="p">:</span>
    <span class="n">my_list</span> <span class="o">=</span> <span class="n">simple_vec</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="n">json_out</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Take a look at that file, and double check that you can read it back in. Note that the
numpy <code class="docutils literal notranslate"><span class="pre">tolist</span></code> method correctly handles the nested rows, and the numpy <code class="docutils literal notranslate"><span class="pre">array</span></code> construct
correctly <code class="docutils literal notranslate"><span class="pre">round-trips</span></code> the list back to a numpy array.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_in</span><span class="p">:</span>
    <span class="n">new_vec</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_in</span><span class="p">)</span>
<span class="n">new_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">new_vec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_vec</span><span class="p">[:,:</span><span class="mi">2</span><span class="p">,:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[[ 0  1]
  [ 4  5]]

 [[20 21]
  [24 25]]

 [[40 41]
  [44 45]]

 [[60 61]
  [64 65]]

 [[80 81]
  [84 85]]]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="including-metadata">
<h2>Including metadata<a class="headerlink" href="#including-metadata" title="Permalink to this headline">#</a></h2>
<p>You want to avoid writing out naked lists of raw numbers without extra information (called metadata) like
physical units, uncertainty estimates, etc.  You can do this with json using a dictionary that contains
your list along with other strings, lists and dictionaries if needed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deg C&#39;</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;plot_title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;incubator temperature&quot;</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;valid range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;missing_values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;first run incubator temperature test&#39;</span>
<span class="n">my_data</span><span class="p">[</span><span class="s1">&#39;first_run&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">simple_vec</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meta_file</span> <span class="o">=</span> <span class="n">text_dir</span> <span class="o">/</span> <span class="s1">&#39;metadata.json&#39;</span>
<span class="c1">#</span>
<span class="c1"># indent 4 spaces</span>
<span class="c1">#</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">meta_file</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">meta_out</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_data</span><span class="p">,</span> <span class="n">meta_out</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Take a look at this file, and notice that the <code class="docutils literal notranslate"><span class="pre">indent=4</span></code> added nested spaces to make the various
levels more readable.  Since whitespace isn’t significant in json files, those space will be ignored
when your read it back in:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">meta_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">meta_in</span><span class="p">:</span>
    <span class="n">new_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">meta_in</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;units&#39;, &#39;plot_title&#39;, &#39;valid range&#39;, &#39;missing_values&#39;, &#39;comment&#39;, &#39;first_run&#39;])
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h2>
<p>To write general data out to a text file you need to choose a text file format (we’ve seen csv and json, but
there are hundreds of different special formats) and then convert your data into datatypes that
the output file format can understand.  Since this is such a common task, almost all python objects have
some way to represent themselves as lists, dicts, or strings.</p>
</div>
<div class="section" id="question-1">
<h2>Question 1<a class="headerlink" href="#question-1" title="Permalink to this headline">#</a></h2>
<p>Put the following items in a dictionary, and write that dictionary to a json file called
<code class="docutils literal notranslate"><span class="pre">parameters.json</span></code> in your week12 folder:</p>
<ol class="simple">
<li><p>A list of 3 datetime objects – with the key <code class="docutils literal notranslate"><span class="pre">the_dates</span></code></p></li>
<li><p>the start and stop values for a slice, with keys <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code></p></li>
</ol>
<p>One way to convert a datetime object into a string is to use the
<a class="reference external" href="https://docs.python.org/3/library/datetime.html">isoformat</a> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># your code</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="question-2">
<h2>Question 2<a class="headerlink" href="#question-2" title="Permalink to this headline">#</a></h2>
<p>Write a function called <code class="docutils literal notranslate"><span class="pre">process_params</span></code> that takes the filename (as a Path object) and returns a dictionary,
holding a list of datetime objects (dictionary key: <code class="docutils literal notranslate"><span class="pre">the_dates</span></code>) converted form their isoformat strings, and the
start and stop values converted to a slice object stored in dictionary key <code class="docutils literal notranslate"><span class="pre">the_slice</span></code>.<br />
The datetime module provides the function <code class="docutils literal notranslate"><span class="pre">datetime.datetime.fromisoformat</span></code>
to go from iso strings back to datetimes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># your code</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="postscript-writing-binary-files">
<h2>Postscript: writing binary files<a class="headerlink" href="#postscript-writing-binary-files" title="Permalink to this headline">#</a></h2>
<p>This is all fine for text files, but what if you need to write out 3 Mbytes of binary arrays?  Converting
all of that to and from text is a major waste of cpu time and disk space.   For this course, the choice would
be to write out an npz file, and accompanying that npz file with a json file holding whatever metadata
you want to include (especially the file name of the npz file, so you don’t lose track).  Once you
get beyond this course however, it’s good to know that there is common workflow. Specifically:
we recommend the following steps:</p>
<ol class="simple">
<li><p>Convert your numpy array to an <a class="reference external" href="https://foundations.projectpythia.org/core/xarray/xarray.html">xarray Dataset</a></p></li>
<li><p>Use xarray to write out the data in a common binary format. The two most common binary data formats
in the earth sciences are <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.to_netcdf.html">netcdf</a>
and <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.to_zarr.html">zarr</a></p></li>
</ol>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./wk12"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../assignment02/ast2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Assignment 2 - Flybys</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../wk13/e211_colormaps.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Plotting color images with matplotlib</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By UBC<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>